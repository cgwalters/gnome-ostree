From ddd83d47165c73e4678f666986abdb6f3f0b8223 Mon Sep 17 00:00:00 2001
From: Colin Walters <walters@verbum.org>
Date: Sun, 15 Jan 2012 16:49:07 -0500
Subject: [PATCH 1/3] build: Add --disable-documentation

Documentation is the source of many cyclical build loops.  Allow
operating system builders to manually cut these cycles initially
by disabling documentation for a first pass.

https://bugzilla.gnome.org/show_bug.cgi?id=675087
---
 Makefile.am  |    4 +++-
 configure.ac |    4 ++++
 2 files changed, 7 insertions(+), 1 deletions(-)

diff --git a/Makefile.am b/Makefile.am
index f522f40..2d0443d 100644
--- a/Makefile.am
+++ b/Makefile.am
@@ -4,12 +4,14 @@ SUBDIRS = 			\
 	data			\
 	common 			\
 	daemon 			\
-	docs			\
 	gui 			\
 	utils 			\
 	po 			\
 	tests 			\
 	$(NULL)
+if ENABLE_DOCUMENTATION
+SUBDIRS += docs
+endif
 
 # add these when help gets added back
 # omf-install
diff --git a/configure.ac b/configure.ac
index c35ad8c..35e6e04 100644
--- a/configure.ac
+++ b/configure.ac
@@ -44,6 +44,10 @@ AC_CONFIG_MACRO_DIR([m4])
 IT_PROG_INTLTOOL([0.40.0])
 
 GNOME_DOC_INIT
+AC_ARG_ENABLE([documentation],
+	AS_HELP_STRING([--enable-documentation], [enable man pages and HTML documentation]),
+	[], [enable_documentation=yes])
+AM_CONDITIONAL(ENABLE_DOCUMENTATION, test x$enable_documentation = xyes)
 
 GETTEXT_PACKAGE=gdm
 AC_SUBST(GETTEXT_PACKAGE)
-- 
1.7.7.6

